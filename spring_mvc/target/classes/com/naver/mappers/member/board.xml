<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Board"> <!-- 매퍼태그 namespace명을 Board로 지정, mybatis에서 쿼리문을 다루는 태그를
매퍼라고 부른다. -->

   <!-- 게시판 저장 -->
   <insert id="board_in" parameterType="com.naver.vo.BoardVO">
     <!-- parameterType속성은 전달인자 타입이다. 일반적으로 생략한다. -->
      insert into tbl_board (bno,writer,title,content) values(bno_seq.nextval,
      #{writer},#{title},#{content})
   </insert>
   <!-- 
     문제)컨트롤러 부터 mybatis매퍼태그까지 게시판 저장되게 만들었다. 정상적으로 저장되게 개발자 테스트를 해보자.
    -->
    
    <!-- 총 레코드 개수 => 총 게시물 개수 -->
    <select id="board_count" resultType="int">
    <!-- resultType는 반환 타입, 생략불가, 반환타입이 정수 숫자 타입이다 -->
    	select count(*) from tbl_board 
    	
    </select>
    
    <!-- 게시물 목록 -->
    <select id="board_list" resultType="board" parameterType="board">
    
    	select * from 
    	(select rowNum rNum, bno, writer, title, viewcnt, regdate
    	from(select * from tbl_board order by bno desc))
    	where rNum &gt; = #{startrow} and rNum &lt; = #{endrow}
    	
    	<!-- rewNum 컬럼은 오라클에서 테이블 생성 시 기본으로 추가된다
    	최초 레코드 저장시 1씩 증가하는 일련 번호값이 저장된다 
    	&gt; : ~ 보다 크다 /&lt; : ~ 보다 작다 (1이상, 10이하)-->
    </select>
    
    <!-- 조회수 증가 -->
    <update id="board_hit" parameterType="int">
    	update tbl_board set viewcnt = viewcnt+1 where bno=#{bno}
    </update>
</mapper>